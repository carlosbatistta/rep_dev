FUNÇÃO AvaliarRegrasDeCredito (DadosSolicitante)

    // 1. INICIALIZAÇÃO E CONSULTAS
    ListaDeResultados = [] // Lista onde os arrays de resultado serão adicionados
    DecisaoFinal = "APROVADO" // Assume aprovação inicial

    // Variáveis para armazenar as consultas
    RetornoFonteX = CONSULTAR_API("FonteX", DadosSolicitante.CPF)
    RetornoFonteY = CONSULTAR_API("FonteY", DadosSolicitante.CPF)
    ConstaBlocklist = CONSULTAR_BASE_INTERNA("Blocklist", DadosSolicitante.CPF)
    
    // Variáveis temporárias para armazenar o resultado da regra ANTES de ser adicionado à lista.
    ResultadoRegra_Regra = ""
    ResultadoRegra_Valor = ""
    ResultadoRegra_Aprovado = FALSO

    // ===================================================
    // 2. AVALIAÇÃO E REGISTRO DE CADA REGRA
    // ===================================================

    // --- RF001: SITUAÇÃO CADASTRAL (FONTE X)
    ResultadoRegra_Regra = "Situação Cadastral"
    ResultadoRegra_Valor = RetornoFonteX.Situacao
    SE RetornoFonteX.Situacao É IGUAL A "Regular" ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        DecisaoFinal = "REPROVADO"
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))

    // --- RF002: CORRESPONDÊNCIA DE NOME
    ResultadoRegra_Regra = "Correspondência de Nome"
    SimilaridadeNome = CALCULAR_SIMILARIDADE(DadosSolicitante.Nome, RetornoFonteX.Nome) //Aplicar a normalização (remoção de caracteres especiais)
    ResultadoRegra_Valor = SimilaridadeNome
    SE SimilaridadeNome >= 70% ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        SE DecisaoFinal É IGUAL A "APROVADO" ENTÃO
            DecisaoFinal = "REPROVADO"
        FIM SE
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))

    // --- RF003: VERIFICAÇÃO DE IDADE
    ResultadoRegra_Regra = "Verificação de Idade"
    IdadeCalculada = CALCULAR_IDADE(RetornoFonteX.DataNascimento)
    ResultadoRegra_Valor = IdadeCalculada
    SE IdadeCalculada É IGUAL A DadosSolicitante.Idade ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        SE DecisaoFinal É IGUAL A "APROVADO" ENTÃO
            DecisaoFinal = "REPROVADO"
        FIM SE
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))


    // --- RF004: CORRESPONDÊNCIA DE ENDEREÇO
    ResultadoRegra_Regra = "Correspondência de Endereço"
    SimilaridadeEndereco = CALCULAR_SIMILARIDADE(DadosSolicitante.Endereco, RetornoFonteX.Endereco) //Aplicar a normalização (remoção de caracteres especiais)
    ResultadoRegra_Valor = SimilaridadeEndereco
    SE SimilaridadeEndereco >= 70% ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        SE DecisaoFinal É IGUAL A "APROVADO" ENTÃO
            DecisaoFinal = "REPROVADO"
        FIM SE
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))

    // --- RF005: SCORE DE CRÉDITO (FONTE Y)
    ResultadoRegra_Regra = "Score de Crédito"
    ResultadoRegra_Valor = RetornoFonteY.Score
    SE RetornoFonteY.Score > 700 ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        SE DecisaoFinal É IGUAL A "APROVADO" ENTÃO
            DecisaoFinal = "REPROVADO"
        FIM SE
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))

    // --- RF006: CONSULTA BLOCKLIST (INTERNA)
    ResultadoRegra_Regra = "Consulta Blocklist"
    ResultadoRegra_Valor = ConstaBlocklist
    SE ConstaBlocklist É FALSO ENTÃO
        ResultadoRegra_Aprovado = VERDADEIRO
    SENÃO
        ResultadoRegra_Aprovado = FALSO
        SE DecisaoFinal É IGUAL A "APROVADO"
            DecisaoFinal = "REPROVADO"
        FIM SE
    FIM SE
    ADICIONAR_ITEM(ListaDeResultados, (ResultadoRegra_Regra, ResultadoRegra_Valor, ResultadoRegra_Aprovado))


    // 3. RETORNO DA LISTA DE RESULTADOS E DECISÃO FINAL
    // O sistema deve retornar um JSON com o código identificador da consulta, Nome, CPF, 
    // lista de resultados (que é o nome da regra, o resultado da consulta e a avaliação) e a decisão final.
    ESTRUTURAR_RETORNO (id_consulta, DadosSolicitante.Nome, DadosSolicitante.CPF, ListaDeResultados, DecisaoFinal)
FIM FUNÇÃO